<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>100DayCore - Gen Z Productivity</title>
    <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;500;700;900&display=swap" rel="stylesheet">
    <!-- Razorpay Checkout Script -->
    <script src="https://checkout.razorpay.com/v1/checkout.js"></script>
    <style>
        /* ========== STYLES ========== */
        :root {
            --bg: #0f0f13;
            --card-bg: #1e1e24;
            --primary: #8A2BE2;
            --accent: #00FF7F;
            --gold: #FFD700;
            --danger: #FF4500;
            --text: #ffffff;
            --text-sec: #a0a0a0;
            --glass: rgba(255, 255, 255, 0.05);
            --glass-border: rgba(255, 255, 255, 0.1);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Outfit', sans-serif;
        }

        body {
            background-color: var(--bg);
            color: var(--text);
            overflow-x: hidden;
        }

        .hidden { display: none !important; }
        .btn {
            background: linear-gradient(45deg, var(--primary), #ff00ff);
            border: none;
            color: white;
            padding: 12px 24px;
            border-radius: 50px;
            font-weight: 700;
            cursor: pointer;
            transition: transform 0.2s, box-shadow 0.2s;
            text-transform: uppercase;
            letter-spacing: 1px;
        }
        .btn:hover { transform: scale(1.05); box-shadow: 0 0 15px var(--primary); }
        .btn-sec { background: var(--glass); border: 1px solid var(--glass-border); }
        .btn-accent { background: var(--accent); color: #000; }
        .btn:disabled {
            opacity: 0.4;
            pointer-events: none;
            filter: grayscale(0.6);
        }

        #onboarding {
            height: 100vh;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            background: radial-gradient(circle at top right, #2a0a4a, var(--bg));
            padding: 20px;
        }
        .onboarding-card {
            background: var(--card-bg);
            padding: 40px;
            border-radius: 30px;
            width: 100%;
            max-width: 400px;
            box-shadow: 0 20px 50px rgba(0,0,0,0.5);
            border: 1px solid var(--glass-border);
        }
        .input-group { margin-bottom: 20px; }
        label { display: block; margin-bottom: 8px; color: var(--text-sec); font-size: 0.9rem; }
        input, select {
            width: 100%;
            padding: 15px;
            background: var(--bg);
            border: 1px solid var(--glass-border);
            border-radius: 15px;
            color: white;
            font-size: 1rem;
            outline: none;
        }
        input:focus { border-color: var(--primary); }

        #app-container {
            position: relative;
            min-height: 100vh;
            padding: 20px;
        }

        header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 30px;
        }
        .burger-menu {
            font-size: 2rem;
            cursor: pointer;
            color: var(--accent);
        }
        .calendar-btn {
            background: var(--glass);
            padding: 10px 20px;
            border-radius: 15px;
            border: 1px solid var(--glass-border);
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .stats-container {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin-bottom: 30px;
        }
        .level-box {
            background: var(--card-bg);
            padding: 20px;
            border-radius: 25px;
            border: 1px solid var(--glass-border);
        }
        .level-badge {
            font-size: 3rem;
            font-weight: 900;
            background: linear-gradient(to right, var(--accent), var(--primary));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }
        .streak-box {
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            background: var(--card-bg);
            border-radius: 25px;
            border: 1px solid var(--glass-border);
        }
        .streak-count { font-size: 2.5rem; font-weight: 800; color: var(--gold); }
        
        .xp-container { margin-bottom: 30px; }
        .xp-text { display: flex; justify-content: space-between; margin-bottom: 5px; font-size: 0.9rem; }
        .progress-bar {
            height: 12px;
            background: var(--bg);
            border-radius: 10px;
            overflow: hidden;
        }
        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, var(--primary), var(--accent));
            width: 0%;
            transition: width 0.5s ease;
        }

        .daily-action {
            background: linear-gradient(135deg, #2a2a35, #1a1a20);
            padding: 30px;
            border-radius: 25px;
            text-align: center;
            margin-bottom: 30px;
            border: 2px solid var(--primary);
            cursor: pointer;
            transition: 0.3s;
        }
        .daily-action:hover { box-shadow: 0 0 20px rgba(138, 43, 226, 0.3); }
        .daily-title { font-size: 1.5rem; margin-bottom: 10px; font-weight: 700; }

        .ai-section {
            background: var(--card-bg);
            border-radius: 25px;
            padding: 20px;
            margin-bottom: 20px;
            border: 1px solid var(--glass-border);
        }
        .ai-input-area { display: flex; gap: 10px; margin-top: 15px; }
        .ai-response {
            margin-top: 15px;
            padding: 15px;
            background: var(--bg);
            border-radius: 15px;
            font-style: italic;
            color: var(--text-sec);
            min-height: 50px;
        }

        .sidebar {
            position: fixed;
            top: 0;
            left: -100%;
            width: 80%;
            height: 100%;
            background: #15151a;
            backdrop-filter: blur(10px);
            z-index: 1000;
            transition: 0.3s ease;
            padding: 30px;
            border-right: 1px solid var(--glass-border);
            overflow-y: auto;
        }
        .sidebar.active { left: 0; }
        .close-sidebar { font-size: 2rem; cursor: pointer; margin-bottom: 30px; display: block; }
        .menu-item {
            padding: 20px;
            border-bottom: 1px solid var(--glass-border);
            font-size: 1.2rem;
            font-weight: 500;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 15px;
        }
        .menu-item:hover { color: var(--primary); }

        .modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.8);
            z-index: 2000;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 20px;
        }
        .modal-content {
            background: var(--card-bg);
            width: 100%;
            max-width: 500px;
            border-radius: 30px;
            padding: 30px;
            max-height: 90vh;
            overflow-y: auto;
            position: relative;
        }
        .close-modal {
            position: absolute;
            top: 20px;
            right: 20px;
            font-size: 1.5rem;
            cursor: pointer;
        }

        /* 100-day calendar grid (20 rows x 5 columns) */
        .calendar-grid {
            display: grid;
            grid-template-columns: repeat(5, 1fr);
            gap: 8px;
            margin-top: 20px;
        }
        .day-cell {
            aspect-ratio: 1;
            display: flex;
            justify-content: center;
            align-items: center;
            border-radius: 8px;
            font-weight: bold;
            font-size: 0.8rem;
            cursor: pointer;
            transition: 0.1s ease;
        }
        .day-completed { background: var(--accent); color: #000; }      /* green for completed days */
        .day-locked { background: var(--danger); opacity: 0.8; }        /* red for locked days */
        .day-start { background: var(--gold); color: #000; }            /* gold for day 1 (always) */

        .task-item {
            background: var(--bg);
            padding: 15px;
            border-radius: 15px;
            margin-bottom: 10px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        .task-check {
            width: 25px;
            height: 25px;
            border: 2px solid var(--text-sec);
            border-radius: 50%;
            cursor: pointer;
        }
        .task-check.checked {
            background: var(--accent);
            border-color: var(--accent);
        }
        .task-points {
            background: var(--primary);
            padding: 2px 8px;
            border-radius: 12px;
            font-size: 0.8rem;
            font-weight: bold;
        }

        /* Store & Bitmoji */
        .avatar-preview {
            width: 100px;
            height: 100px;
            background: var(--glass);
            border-radius: 50%;
            margin: 0 auto 20px;
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: 2rem;
            border: 2px solid var(--primary);
            flex-direction: column;
            line-height: 1.2;
        }
        .store-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 15px;
            margin-top: 20px;
        }
        .store-card {
            background: var(--bg);
            padding: 15px;
            border-radius: 15px;
            text-align: center;
            border: 1px solid var(--glass-border);
        }
        .store-card .price { color: var(--gold); font-weight: bold; margin: 5px 0; }
        .store-card .locked { color: var(--danger); font-size: 0.8rem; }
        .store-card .owned { color: var(--accent); font-size: 0.8rem; }
        .store-card button {
            background: var(--primary);
            border: none;
            color: white;
            padding: 5px 10px;
            border-radius: 20px;
            cursor: pointer;
            font-size: 0.8rem;
            margin-top: 5px;
        }
        .store-card button:disabled { opacity: 0.5; cursor: not-allowed; }
        .category-tabs {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
            margin: 15px 0;
            justify-content: center;
        }
        .category-tab {
            background: var(--glass);
            border: 1px solid var(--glass-border);
            padding: 5px 10px;
            border-radius: 20px;
            font-size: 0.8rem;
            cursor: pointer;
            transition: 0.2s;
        }
        .category-tab:hover, .category-tab.active {
            background: var(--primary);
            border-color: var(--primary);
        }
        .bitmoji-inventory {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            justify-content: center;
            margin-top: 15px;
        }
        .inventory-item {
            width: 50px;
            height: 50px;
            background: var(--glass);
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
            cursor: pointer;
            border: 2px solid transparent;
        }
        .inventory-item.equipped { border-color: var(--accent); }

        .leaderboard-item {
            display: flex;
            align-items: center;
            gap: 15px;
            padding: 15px;
            background: var(--bg);
            margin-bottom: 10px;
            border-radius: 15px;
        }
        .rank-1 { border: 2px solid var(--gold); }
        .rank-2 { border: 2px solid silver; }
        .rank-3 { border: 2px solid #cd7f32; }

        .plan-card {
            background: linear-gradient(180deg, rgba(255,255,255,0.1), transparent);
            border: 1px solid var(--glass-border);
            padding: 20px;
            border-radius: 20px;
            margin-bottom: 20px;
            text-align: center;
        }
        .plan-price { font-size: 2rem; font-weight: 900; color: var(--accent); }
        .features-list { text-align: left; margin: 15px 0; padding-left: 20px; color: var(--text-sec); }
    </style>
</head>
<body>

    <!-- ONBOARDING SCREEN -->
    <div id="onboarding">
        <div class="onboarding-card">
            <h2 style="text-align:center; margin-bottom:20px;">Create Profile</h2>
            <div class="input-group">
                <label>Name</label>
                <input type="text" id="inp-name" placeholder="Enter your name">
            </div>
            <div class="input-group">
                <label>Email</label>
                <input type="email" id="inp-email" placeholder="Enter email">
            </div>
            <div class="input-group">
                <label>Age</label>
                <input type="number" id="inp-age" placeholder="Age">
            </div>
            <div class="input-group">
                <label>Goal</label>
                <select id="inp-goal">
                    <option value="weightLoss">Weight Loss</option>
                    <option value="muscleGain">Muscle Gain</option>
                    <option value="healthyLifestyle">Healthy Lifestyle</option>
                    <option value="productivity">Productivity</option>
                </select>
            </div>
            <div class="input-group">
                <label>Gender</label>
                <select id="inp-gender">
                    <option value="Male">Male</option>
                    <option value="Female">Female</option>
                    <option value="Other">Other</option>
                </select>
            </div>
            <button class="btn" style="width:100%" onclick="saveProfile()">Start Journey</button>
        </div>
    </div>

    <!-- MAIN APP -->
    <div id="app-container" class="hidden">
        <header>
            <div class="burger-menu" onclick="toggleSidebar()">‚ò∞</div>
            <div style="font-size:1.5rem; font-weight:900; background: linear-gradient(to right, var(--accent), var(--primary)); -webkit-background-clip: text; -webkit-text-fill-color: transparent;">100DayCore</div>
            <div class="calendar-btn" onclick="openCalendar()">
                <span>üìÖ</span> <span id="header-date">Day 1/100</span>
            </div>
        </header>

        <div class="stats-container">
            <div class="level-box">
                <div style="font-size:0.8rem; color:var(--text-sec)">CURRENT LEVEL</div>
                <div class="level-badge" id="display-level">1</div>
                <div style="color:var(--accent); font-size:0.9rem; margin-top:5px;" id="day-counter"></div>
            </div>
            <div class="streak-box">
                <div style="font-size:0.8rem; color:var(--text-sec)">STREAK</div>
                <div class="streak-count" id="display-streak">0 üî•</div>
            </div>
        </div>

        <div class="xp-container">
            <div class="xp-text">
                <span>XP</span>
                <span id="xp-text">0 / 100</span>
            </div>
            <div class="progress-bar">
                <div class="progress-fill" id="xp-fill"></div>
            </div>
        </div>

        <div class="daily-action" onclick="openTasks()">
            <div class="daily-title">Complete Today's Tasks</div>
            <div style="color:var(--text-sec); font-size:0.9rem;">Click to view and finish tasks</div>
        </div>

        <div class="ai-section">
            <h3 style="color:var(--primary)">ü§ñ AI Coach</h3>
            <div class="ai-response" id="ai-output">
                Hello! I am your AI Coach. Ask me anything related to your goal: <span id="ai-goal-display" style="color:white"></span>.
            </div>
            <div class="ai-input-area">
                <input type="text" id="ai-input" placeholder="Ask for advice...">
                <button class="btn" onclick="askAI()">Send</button>
            </div>
        </div>
    </div>

    <!-- SIDEBAR -->
    <div class="sidebar" id="sidebar">
        <span class="close-sidebar" onclick="toggleSidebar()">√ó</span>
        <div class="menu-item" onclick="showProfile()">üë§ Profile</div>
        <div class="menu-item" onclick="showLeaderboard()">üèÜ Leaderboard</div>
        <div class="menu-item" onclick="showBitmoji()">üòé Bitmoji</div>
        <div class="menu-item" onclick="showStore()">üõí Store</div>
        <div class="menu-item" onclick="showPremium()">‚öúÔ∏è Premium</div>
        <div class="menu-item" style="margin-top:50px; color:var(--danger)" onclick="resetData()">‚ùå Reset Data</div>
    </div>

    <!-- MODALS -->

    <!-- Profile Modal -->
    <div id="modal-profile" class="modal hidden">
        <div class="modal-content">
            <span class="close-modal" onclick="closeAllModals()">√ó</span>
            <h2>Edit Profile</h2>
            <div class="input-group" style="margin-top:20px">
                <label>Name</label>
                <input type="text" id="edit-name">
            </div>
            <div class="input-group">
                <label>Email</label>
                <input type="email" id="edit-email">
            </div>
            <div class="input-group">
                <label>Age</label>
                <input type="number" id="edit-age">
            </div>
            <div class="input-group">
                <label>Goal</label>
                <select id="edit-goal">
                    <option value="weightLoss">Weight Loss</option>
                    <option value="muscleGain">Muscle Gain</option>
                    <option value="healthyLifestyle">Healthy Lifestyle</option>
                    <option value="productivity">Productivity</option>
                </select>
            </div>
            <div class="input-group">
                <label>Gender</label>
                <select id="edit-gender">
                    <option value="Male">Male</option>
                    <option value="Female">Female</option>
                    <option value="Other">Other</option>
                </select>
            </div>
            <button class="btn" style="width:100%" onclick="updateProfile()">Save Changes</button>
        </div>
    </div>

    <!-- Calendar Modal (100-day grid) -->
    <div id="modal-calendar" class="modal hidden">
        <div class="modal-content">
            <span class="close-modal" onclick="closeAllModals()">√ó</span>
            <h2>100-Day Challenge</h2>
            <div class="calendar-grid" id="calendar-grid"></div>
        </div>
    </div>

    <!-- Tasks Modal -->
    <div id="modal-tasks" class="modal hidden">
        <div class="modal-content">
            <span class="close-modal" onclick="closeAllModals()">√ó</span>
            <h2>Today's Tasks</h2>
            <p id="task-date-display" style="color:var(--text-sec); margin-bottom:15px;"></p>
            <div id="task-list-container"></div>
            <div id="tasks-status-message" style="text-align:center; margin:15px 0; color:var(--gold);"></div>
            <button class="btn btn-accent" id="finish-day-btn" style="width:100%; margin-top:20px;" onclick="finishDay()" disabled>Complete tasks to claim rewards</button>
        </div>
    </div>

    <!-- Leaderboard Modal -->
    <div id="modal-leaderboard" class="modal hidden">
        <div class="modal-content">
            <span class="close-modal" onclick="closeAllModals()">√ó</span>
            <h2>Leaderboard</h2>
            <div id="leaderboard-list" style="margin-top:20px"></div>
        </div>
    </div>

    <!-- Bitmoji Modal -->
    <div id="modal-bitmoji" class="modal hidden">
        <div class="modal-content">
            <span class="close-modal" onclick="closeAllModals()">√ó</span>
            <h2>Your Bitmoji</h2>
            <div class="avatar-preview" id="bitmoji-preview">üòê</div>
            <div style="text-align:center; margin-bottom:20px;">
                <span style="color:var(--gold)">ü™ô Coins: <span id="bitmoji-coins">0</span></span>
                <span style="margin-left:20px;">üì¶ Crates: <span id="bitmoji-crates">0</span></span>
            </div>
            <h3>Inventory</h3>
            <div class="bitmoji-inventory" id="bitmoji-inventory"></div>
            <button class="btn btn-sec" style="margin-top:20px; width:100%;" onclick="claimFreeReward()">üéÅ Claim Daily Reward</button>
        </div>
    </div>

    <!-- Store Modal -->
    <div id="modal-store" class="modal hidden">
        <div class="modal-content">
            <span class="close-modal" onclick="closeAllModals()">√ó</span>
            <h2>Store</h2>
            <div style="display: flex; justify-content: space-between; margin: 10px 0;">
                <span style="color:var(--gold)">ü™ô Coins: <span id="store-coins">0</span></span>
                <span>üì¶ Crates: <span id="store-crates">0</span></span>
            </div>
            <div class="category-tabs" id="category-tabs"></div>
            <div class="store-grid" id="store-items"></div>
            <button class="btn btn-sec" style="margin-top:20px; width:100%;" onclick="openCrate()">üì¶ Open Crate (Cost: 1 Crate)</button>
        </div>
    </div>

    <!-- Premium Modal -->
    <div id="modal-premium" class="modal hidden">
        <div class="modal-content">
            <span class="close-modal" onclick="closeAllModals()">√ó</span>
            <h2>Premium Plans</h2>
            <div class="plan-card">
                <div style="font-size:1.5rem">ü•à Monthly</div>
                <div class="plan-price">‚Çπ99</div>
                <ul class="features-list">
                    <li>Unlimited AI Access</li>
                    <li>Exclusive Themes</li>
                    <li>Double XP Days</li>
                </ul>
                <button class="btn btn-sec" onclick="initPayment('monthly')">Subscribe</button>
            </div>
            <div class="plan-card" style="border-color:var(--gold)">
                <div style="font-size:1.5rem">üî• 3 Months</div>
                <div class="plan-price">‚Çπ290</div>
                <ul class="features-list">
                    <li>All Monthly Features</li>
                    <li>VIP Avatar Frame</li>
                    <li>Early Access to New Features</li>
                    <li>Priority Support</li>
                </ul>
                <button class="btn btn-accent" onclick="initPayment('quarterly')">Subscribe</button>
            </div>
        </div>
    </div>

    <script>
        // ===============================
        // GOAL TASKS (50 each) - FULLY POPULATED
        // ===============================
        const goalTasks = {
            weightLoss: [
                { task: "Morning 20-min walk", points: 50 },
                { task: "Drink 3L water", points: 50 },
                { task: "No sugar today", points: 50 },
                { task: "30-min cardio", points: 50 },
                { task: "Eat salad with lunch", points: 50 },
                { task: "10k steps", points: 50 },
                { task: "No junk food", points: 50 },
                { task: "Intermittent fasting 16:8", points: 50 },
                { task: "Green tea instead of soda", points: 50 },
                { task: "Home HIIT workout", points: 50 },
                { task: "Track calories", points: 50 },
                { task: "Avoid late night snacks", points: 50 },
                { task: "Stretch 15 mins", points: 50 },
                { task: "Eat high protein meal", points: 50 },
                { task: "Replace rice with veggies", points: 50 },
                { task: "Cycling 30 mins", points: 50 },
                { task: "Swimming session", points: 50 },
                { task: "Leg day workout", points: 50 },
                { task: "Core workout", points: 50 },
                { task: "Reduce carbs today", points: 50 },
                { task: "No fried food", points: 50 },
                { task: "Meal prep healthy food", points: 50 },
                { task: "Morning lemon water", points: 50 },
                { task: "Jogging 25 mins", points: 50 },
                { task: "Jump rope 10 mins", points: 50 },
                { task: "Burpees 3 sets", points: 50 },
                { task: "Wall sits challenge", points: 50 },
                { task: "Plank 3 mins total", points: 50 },
                { task: "Pushups 30 reps", points: 50 },
                { task: "Squats 50 reps", points: 50 },
                { task: "Healthy breakfast", points: 50 },
                { task: "Avoid processed food", points: 50 },
                { task: "Evening walk", points: 50 },
                { task: "Yoga session", points: 50 },
                { task: "Sleep 8 hours", points: 50 },
                { task: "No soft drinks", points: 50 },
                { task: "Eat fruits today", points: 50 },
                { task: "Protein shake instead dessert", points: 50 },
                { task: "Track weight progress", points: 50 },
                { task: "Reduce portion size", points: 50 },
                { task: "Outdoor activity 1hr", points: 50 },
                { task: "Dance workout", points: 50 },
                { task: "Climb stairs instead lift", points: 50 },
                { task: "Drink detox water", points: 50 },
                { task: "Low calorie dinner", points: 50 },
                { task: "Meal without oil", points: 50 },
                { task: "Healthy snack choice", points: 50 },
                { task: "Consistency check", points: 50 },
                { task: "Track body measurements", points: 50 },
                { task: "Weekly progress review", points: 50 }
            ],
            muscleGain: [
                { task: "Chest workout", points: 50 },
                { task: "Back workout", points: 50 },
                { task: "Shoulder workout", points: 50 },
                { task: "Leg workout", points: 50 },
                { task: "Biceps workout", points: 50 },
                { task: "Triceps workout", points: 50 },
                { task: "Deadlift session", points: 50 },
                { task: "Bench press session", points: 50 },
                { task: "Squat session", points: 50 },
                { task: "Pull-ups 3 sets", points: 50 },
                { task: "Pushups 4 sets", points: 50 },
                { task: "Increase protein intake", points: 50 },
                { task: "Protein shake", points: 50 },
                { task: "Progressive overload", points: 50 },
                { task: "Warm up properly", points: 50 },
                { task: "Stretch after workout", points: 50 },
                { task: "Track reps", points: 50 },
                { task: "Track weight lifted", points: 50 },
                { task: "Calorie surplus day", points: 50 },
                { task: "Eggs in breakfast", points: 50 },
                { task: "Chicken meal", points: 50 },
                { task: "Peanut butter snack", points: 50 },
                { task: "Core strength workout", points: 50 },
                { task: "Upper body session", points: 50 },
                { task: "Lower body session", points: 50 },
                { task: "Rest and recovery day", points: 50 },
                { task: "Foam rolling", points: 50 },
                { task: "Hydration check", points: 50 },
                { task: "Good posture practice", points: 50 },
                { task: "Increase dumbbell weight", points: 50 },
                { task: "Barbell training", points: 50 },
                { task: "Resistance band training", points: 50 },
                { task: "Incline pushups", points: 50 },
                { task: "Chin-ups", points: 50 },
                { task: "Farmer carry", points: 50 },
                { task: "Muscle mind connection focus", points: 50 },
                { task: "Healthy carbs meal", points: 50 },
                { task: "Oats breakfast", points: 50 },
                { task: "Milk intake", points: 50 },
                { task: "Track body weight", points: 50 },
                { task: "Check muscle progress pics", points: 50 },
                { task: "Heavy lifting day", points: 50 },
                { task: "Light recovery workout", points: 50 },
                { task: "Abs workout", points: 50 },
                { task: "Glutes workout", points: 50 },
                { task: "Hamstring workout", points: 50 },
                { task: "Calf raises", points: 50 },
                { task: "Forearm workout", points: 50 },
                { task: "Sleep 8 hours", points: 50 },
                { task: "Weekly strength test", points: 50 }
            ],
            healthyLifestyle: [
                { task: "Wake up early", points: 50 },
                { task: "Meditation 10 mins", points: 50 },
                { task: "Deep breathing", points: 50 },
                { task: "Drink water on wake", points: 50 },
                { task: "Healthy breakfast", points: 50 },
                { task: "Read 20 mins", points: 50 },
                { task: "Journal thoughts", points: 50 },
                { task: "Digital detox 1hr", points: 50 },
                { task: "Call family member", points: 50 },
                { task: "Clean your room", points: 50 },
                { task: "Gratitude list", points: 50 },
                { task: "Nature walk", points: 50 },
                { task: "Limit screen time", points: 50 },
                { task: "Plan next day", points: 50 },
                { task: "Sleep before 11pm", points: 50 },
                { task: "Healthy lunch", points: 50 },
                { task: "Healthy dinner", points: 50 },
                { task: "Positive affirmation", points: 50 },
                { task: "Smile more", points: 50 },
                { task: "Avoid negativity", points: 50 },
                { task: "Stretching routine", points: 50 },
                { task: "Sunlight exposure", points: 50 },
                { task: "Organize workspace", points: 50 },
                { task: "Declutter space", points: 50 },
                { task: "Hydration goal met", points: 50 },
                { task: "Practice kindness", points: 50 },
                { task: "No gossip day", points: 50 },
                { task: "Cook healthy meal", points: 50 },
                { task: "No junk day", points: 50 },
                { task: "Self reflection", points: 50 },
                { task: "Goal review", points: 50 },
                { task: "Weekly reset", points: 50 },
                { task: "Track habits", points: 50 },
                { task: "Morning routine complete", points: 50 },
                { task: "Evening routine complete", points: 50 },
                { task: "Drink herbal tea", points: 50 },
                { task: "Limit caffeine", points: 50 },
                { task: "Avoid sugar", points: 50 },
                { task: "Good posture", points: 50 },
                { task: "Help someone", points: 50 },
                { task: "Practice patience", points: 50 },
                { task: "No complaining day", points: 50 },
                { task: "Focus on self growth", points: 50 },
                { task: "Creative activity", points: 50 },
                { task: "Mindful eating", points: 50 },
                { task: "Deep cleaning task", points: 50 },
                { task: "Personal hygiene care", points: 50 },
                { task: "Mental health check", points: 50 },
                { task: "Weekly reflection", points: 50 },
                { task: "Celebrate small win", points: 50 }
            ],
            productivity: [
                { task: "Wake up 6AM", points: 50 },
                { task: "Make to-do list", points: 50 },
                { task: "Complete hardest task first", points: 50 },
                { task: "Study 1 hour", points: 50 },
                { task: "Read 10 pages", points: 50 },
                { task: "No phone 2 hrs", points: 50 },
                { task: "Finish pending work", points: 50 },
                { task: "Organize files", points: 50 },
                { task: "Plan weekly goals", points: 50 },
                { task: "Focus 45-min session", points: 50 },
                { task: "Learn new skill", points: 50 },
                { task: "Watch educational video", points: 50 },
                { task: "Write 500 words", points: 50 },
                { task: "Code 30 mins", points: 50 },
                { task: "Practice typing speed", points: 50 },
                { task: "Update resume", points: 50 },
                { task: "Research topic", points: 50 },
                { task: "Clean inbox", points: 50 },
                { task: "Review finances", points: 50 },
                { task: "Budget planning", points: 50 },
                { task: "Pomodoro x4", points: 50 },
                { task: "Brainstorm ideas", points: 50 },
                { task: "Skill practice", points: 50 },
                { task: "Online course lesson", points: 50 },
                { task: "Networking message", points: 50 },
                { task: "Public speaking practice", points: 50 },
                { task: "Create project plan", points: 50 },
                { task: "Update portfolio", points: 50 },
                { task: "Morning deep work", points: 50 },
                { task: "Evening review", points: 50 },
                { task: "Limit distractions", points: 50 },
                { task: "Organize schedule", points: 50 },
                { task: "Goal visualization", points: 50 },
                { task: "Skill improvement", points: 50 },
                { task: "Daily reflection", points: 50 },
                { task: "Time tracking", points: 50 },
                { task: "Set deadlines", points: 50 },
                { task: "Finish book chapter", points: 50 },
                { task: "Improve handwriting", points: 50 },
                { task: "Declutter desk", points: 50 },
                { task: "Create habit tracker", points: 50 },
                { task: "Mind mapping", points: 50 },
                { task: "Update calendar", points: 50 },
                { task: "Plan tomorrow", points: 50 },
                { task: "Avoid procrastination", points: 50 },
                { task: "Skill revision", points: 50 },
                { task: "Practice consistency", points: 50 },
                { task: "Read industry news", points: 50 },
                { task: "Track progress", points: 50 },
                { task: "Weekly productivity review", points: 50 }
            ]
        };

        // ===============================
        // STORE ELITE ENGINE (FULL)
        // ===============================
        const STORE_CATEGORIES = [
            "shirts", "tshirts", "shorts", "pants", "shoes",
            "glasses", "accessories", "frames", "rewards"
        ];

        const STORE_ITEMS = {};

        STORE_CATEGORIES.forEach(cat => {
            STORE_ITEMS[cat] = generateCategory(cat);
        });

        function generateCategory(category) {
            let items = [];
            for (let i = 1; i <= 5; i++) {
                items.push({
                    id: `${category}_normal_${i}`,
                    name: `${category} Basic ${i}`,
                    price: 50 * i,
                    premium: false,
                    levelRequired: i * 2,
                    type: category,
                    icon: getIconForCategory(category)
                });
            }
            for (let i = 1; i <= 5; i++) {
                items.push({
                    id: `${category}_premium_${i}`,
                    name: `${category} Elite ${i}`,
                    price: 100 * i,
                    premium: true,
                    levelRequired: i * 3,
                    type: category,
                    icon: getIconForCategory(category, true)
                });
            }
            return items;
        }

        function getIconForCategory(cat, premium = false) {
            const icons = {
                shirts: 'üëï',
                tshirts: 'üëï',
                shorts: 'ü©≥',
                pants: 'üëñ',
                shoes: 'üëü',
                glasses: 'üëì',
                accessories: 'üß¢',
                frames: 'üñºÔ∏è',
                rewards: 'üéÅ'
            };
            return icons[cat] || 'üì¶';
        }

        function findItemById(id) {
            for (let cat in STORE_ITEMS) {
                let found = STORE_ITEMS[cat].find(i => i.id === id);
                if (found) return found;
            }
            return null;
        }

        // ===============================
        // STATE MANAGEMENT
        // ===============================
        const defaultState = {
            name: "",
            email: "",
            age: 0,
            goal: "weightLoss",
            gender: "Male",
            xp: 0,
            level: 1,
            coins: 100,
            streak: 0,
            completedDays: [],
            tasks: [],
            inventory: [],
            crates: 0,
            isPremium: false,
            premiumPlan: null,
            equippedItems: []
        };

        let user = JSON.parse(localStorage.getItem('levelUpUser')) || defaultState;
        // ensure all properties exist
        if (!user.inventory) user.inventory = [];
        if (!user.crates) user.crates = 0;
        if (!user.isPremium) user.isPremium = false;
        if (!user.premiumPlan) user.premiumPlan = null;
        if (!user.equippedItems) user.equippedItems = [];

        // ===============================
        // INITIALIZATION
        // ===============================
        function init() {
            if (!user.name) {
                document.getElementById('onboarding').classList.remove('hidden');
                document.getElementById('app-container').classList.add('hidden');
            } else {
                document.getElementById('onboarding').classList.add('hidden');
                document.getElementById('app-container').classList.remove('hidden');
                updateUI();
            }
        }

        // ===============================
        // ONBOARDING & PROFILE
        // ===============================
        function saveProfile() {
            const name = document.getElementById('inp-name').value;
            const email = document.getElementById('inp-email').value;
            const age = document.getElementById('inp-age').value;
            const goal = document.getElementById('inp-goal').value;
            const gender = document.getElementById('inp-gender').value;

            if (!name || !email) return alert("Please fill in required fields");

            user.name = name;
            user.email = email;
            user.age = age;
            user.goal = goal;
            user.gender = gender;
            
            saveState();
            init();
        }

        function updateProfile() {
            user.name = document.getElementById('edit-name').value;
            user.email = document.getElementById('edit-email').value;
            user.age = document.getElementById('edit-age').value;
            user.goal = document.getElementById('edit-goal').value;
            user.gender = document.getElementById('edit-gender').value;
            
            saveState();
            updateUI();
            closeAllModals();
        }

        function showProfile() {
            toggleSidebar();
            document.getElementById('modal-profile').classList.remove('hidden');
            document.getElementById('edit-name').value = user.name;
            document.getElementById('edit-email').value = user.email;
            document.getElementById('edit-age').value = user.age;
            document.getElementById('edit-goal').value = user.goal;
            document.getElementById('edit-gender').value = user.gender;
        }

        // ===============================
        // UI UPDATES
        // ===============================
        function updateUI() {
            document.getElementById('ai-goal-display').innerText = user.goal.replace(/([A-Z])/g, ' $1').trim();
            document.getElementById('display-level').innerText = user.level;
            document.getElementById('display-streak').innerText = user.streak + " üî•";
            
            const xpForNext = user.level * 100;
            const percentage = Math.min((user.xp / xpForNext) * 100, 100);
            document.getElementById('xp-fill').style.width = percentage + "%";
            document.getElementById('xp-text').innerText = `${user.xp} / ${xpForNext} XP`;

            // Update day counter in level box ‚Äì now only the current date
            const dateObj = new Date();
            const formattedDate = dateObj.toLocaleDateString('en-US', { month: 'short', day: 'numeric', year: 'numeric' });
            document.getElementById('day-counter').innerText = formattedDate;

            // Update header with challenge day number (e.g., "Day 3/100")
            const todayStr = new Date().toISOString().split('T')[0];
            const daysDone = user.completedDays.length;
            const isTodayDone = user.completedDays.includes(todayStr);
            const currentDay = isTodayDone ? daysDone : daysDone + 1;
            document.getElementById('header-date').innerText = `Day ${currentDay}/100`;
        }

        function saveState() {
            localStorage.setItem('levelUpUser', JSON.stringify(user));
        }

        function resetData() {
            if(confirm("Reset all progress?")) {
                localStorage.removeItem('levelUpUser');
                location.reload();
            }
        }

        // ===============================
        // NAVIGATION
        // ===============================
        function toggleSidebar() {
            document.getElementById('sidebar').classList.toggle('active');
        }

        function closeAllModals() {
            document.querySelectorAll('.modal').forEach(m => m.classList.add('hidden'));
        }

        // ===============================
        // CALENDAR (100 days)
        // ===============================
        function openCalendar() {
            closeAllModals();
            document.getElementById('modal-calendar').classList.remove('hidden');
            renderCalendar();
        }

        function renderCalendar() {
            const grid = document.getElementById('calendar-grid');
            grid.innerHTML = '';
            const today = new Date().toISOString().split('T')[0];
            const [year, month, day] = today.split('-').map(Number);

            // Assume challenge starts on the 1st of current month
            const challengeStart = new Date(year, month-1, 1);
            for (let d = 1; d <= 100; d++) {
                const div = document.createElement('div');
                div.classList.add('day-cell');
                div.innerText = d;

                const currentDate = new Date(challengeStart);
                currentDate.setDate(challengeStart.getDate() + (d - 1));
                const dateStr = currentDate.toISOString().split('T')[0];

                // Apply colors based on rules:
                // - Day 1 is always gold (day-start)
                // - Completed days (except day 1) are green
                // - All other days are red (locked)
                if (d === 1) {
                    div.classList.add('day-start');
                } else if (user.completedDays.includes(dateStr)) {
                    div.classList.add('day-completed');
                } else {
                    div.classList.add('day-locked');
                }

                // Click handler: only day 1 opens tasks
                div.onclick = () => {
                    if (d === 1) {
                        closeAllModals();      // close calendar
                        openTasks();            // open today's tasks
                    } else {
                        alert(`Day ${d} is locked. Complete day 1 to unlock the next day.`);
                    }
                };

                grid.appendChild(div);
            }
        }

        // ===============================
        // TASKS
        // ===============================
        function openTasks() {
            closeAllModals();

            const todayStr = new Date().toISOString().split('T')[0];
            
            // If today is already completed, show message and don't open tasks
            if (user.completedDays.includes(todayStr)) {
                alert("You've already completed today's tasks! Come back tomorrow.");
                return;
            }

            document.getElementById('modal-tasks').classList.remove('hidden');
            
            const today = new Date().toDateString();
            document.getElementById('task-date-display').innerText = today;

            if (user.tasks.length === 0) {
                const allTasks = goalTasks[user.goal];
                const shuffled = [...allTasks].sort(() => 0.5 - Math.random());
                const selected = shuffled.slice(0, 5);
                user.tasks = selected.map(t => ({ ...t, done: false }));
            }

            renderTasks();
        }

        function renderTasks() {
            const container = document.getElementById('task-list-container');
            container.innerHTML = '';
            user.tasks.forEach((t, index) => {
                const div = document.createElement('div');
                div.classList.add('task-item');
                div.innerHTML = `
                    <div style="display: flex; align-items: center; gap: 10px; flex:1;">
                        <span style="${t.done ? 'text-decoration:line-through; opacity:0.5' : ''}">${t.task}</span>
                        <span class="task-points">+${t.points}</span>
                    </div>
                    <div class="task-check ${t.done ? 'checked' : ''}" onclick="toggleTask(${index})"></div>
                `;
                container.appendChild(div);
            });

            // Update finish button state based on completion
            const allDone = user.tasks.every(t => t.done);
            const finishBtn = document.getElementById('finish-day-btn');
            const statusMsg = document.getElementById('tasks-status-message');
            
            if (allDone) {
                finishBtn.disabled = false;
                finishBtn.innerText = 'Finish Day & Claim Rewards üéâ';
                statusMsg.innerText = '‚úÖ All tasks complete! Ready to claim.';
            } else {
                finishBtn.disabled = true;
                finishBtn.innerText = 'Complete tasks to claim rewards';
                statusMsg.innerText = '‚ö†Ô∏è Complete all 5 tasks to finish the day.';
            }
        }

        function toggleTask(index) {
            user.tasks[index].done = !user.tasks[index].done;
            renderTasks();
        }

        function finishDay() {
            const allDone = user.tasks.every(t => t.done);
            if (!allDone) return alert("Complete all tasks first!");

            const totalPoints = user.tasks.reduce((sum, t) => sum + t.points, 0);
            
            // Apply premium XP multiplier if active
            let xpGain = totalPoints;
            if (user.isPremium && user.xpMultiplier) {
                xpGain = Math.floor(xpGain * user.xpMultiplier);
            }

            user.xp += xpGain;
            user.coins += 20;
            user.streak += 1;
            
            // Level up logic
            while (user.xp >= user.level * 100) {
                user.level++;
                user.coins += 50;
                alert(`üéâ LEVEL UP! You are now Level ${user.level}!`);
            }

            const today = new Date().toISOString().split('T')[0];
            if (!user.completedDays.includes(today)) {
                user.completedDays.push(today);
            }

            user.tasks = [];
            saveState();
            updateUI();
            closeAllModals();
            alert(`Day Completed! +${xpGain} XP, +20 Coins`);
        }

        // ===============================
        // AI COACH
        // ===============================
        function askAI() {
            const input = document.getElementById('ai-input');
            const output = document.getElementById('ai-output');
            const question = input.value;

            if (!question) return;

            output.innerHTML = "Thinking...";
            
            setTimeout(() => {
                const responses = [
                    `That's a great question about ${user.goal.replace(/([A-Z])/g, ' $1').trim()}. Consistency is key!`,
                    `Remember, progress is progress, no matter how small.`,
                    `Focus on your goal: ${user.goal.replace(/([A-Z])/g, ' $1').trim()}. You got this!`,
                    `Take a break if you need to, but never give up.`
                ];
                const randomResponse = responses[Math.floor(Math.random() * responses.length)];
                output.innerHTML = `<strong>You:</strong> ${question}<br><br><strong>AI:</strong> ${randomResponse}`;
                input.value = '';
            }, 1000);
        }

        // ===============================
        // LEADERBOARD
        // ===============================
        function showLeaderboard() {
            toggleSidebar();
            document.getElementById('modal-leaderboard').classList.remove('hidden');
            
            const mockUsers = [
                {name: "Alex", xp: 2500, level: 5},
                {name: "Sarah", xp: 1800, level: 4},
                {name: "You", xp: user.xp + (user.level*100), level: user.level},
                {name: "Mike", xp: 500, level: 2}
            ].sort((a,b) => b.xp - a.xp);

            const list = document.getElementById('leaderboard-list');
            list.innerHTML = '';

            mockUsers.forEach((u, i) => {
                let reward = "";
                if (i < 3) reward = `<span style="color:var(--gold); font-size:0.8rem">+100 Coins üèÜ</span>`;

                const div = document.createElement('div');
                div.classList.add('leaderboard-item');
                if (i === 0) div.classList.add('rank-1');
                if (i === 1) div.classList.add('rank-2');
                if (i === 2) div.classList.add('rank-3');
                if(u.name === "You") div.style.borderColor = "var(--primary)";
                
                div.innerHTML = `
                    <div style="font-weight:900; font-size:1.2rem; width:30px">#${i+1}</div>
                    <div style="flex:1">
                        <div style="font-weight:bold">${u.name}</div>
                        <div style="font-size:0.8rem; color:var(--text-sec)">Lvl ${u.level}</div>
                    </div>
                    <div>${u.xp} XP</div>
                    <div>${reward}</div>
                `;
                list.appendChild(div);
            });
        }

        function rewardTopPlayers(position) {
            if (position === 1) {
                user.coins += 200;
                user.xp += 100;
                user.crates += 1;
            } else if (position === 2) {
                user.coins += 150;
                user.xp += 70;
                user.crates += 1;
            } else if (position === 3) {
                user.coins += 100;
                user.xp += 50;
                user.crates += 1;
            }
            saveState();
        }

        // ===============================
        // PREMIUM & RAZORPAY
        // ===============================
        function initPayment(plan) {
            const planPrices = {
                monthly: 9900,   // ‚Çπ99 = 9900 paise
                quarterly: 29000  // ‚Çπ290 = 29000 paise
            };

            const options = {
                key: "rzp_live_SJ5ukbKmD3GVp8", // üî¥ REPLACE WITH YOUR ACTUAL RAZORPAY KEY ID
                amount: planPrices[plan],
                currency: "INR",
                name: "100DayCore",
                description: `${plan === 'monthly' ? 'Monthly' : '3 Months'} Premium Subscription`,
                image: "https://your-logo-url.com/logo.png", // optional
                handler: function (response) {
                    alert("Payment successful! Payment ID: " + response.razorpay_payment_id);
                    activatePremium(plan);
                },
                prefill: {
                    name: user.name,
                    email: user.email
                },
                theme: {
                    color: "#8A2BE2"
                }
            };

            const rzp = new Razorpay(options);
            rzp.open();
        }

        function activatePremium(plan) {
            user.isPremium = true;
            user.premiumPlan = plan;
            if (plan === "quarterly") {
                user.xpMultiplier = 1.5;
                user.dailyBonusCoins = 20;
            } else {
                user.xpMultiplier = 1.2;
                user.dailyBonusCoins = 10;
            }
            saveState();
            alert(`Premium (${plan === 'monthly' ? 'Monthly' : '3 Months'}) activated! ‚öúÔ∏è`);
            closeAllModals();
        }

        // ===============================
        // BITMOJI
        // ===============================
        function showBitmoji() {
            toggleSidebar();
            document.getElementById('modal-bitmoji').classList.remove('hidden');
            renderBitmoji();
        }

        function renderBitmoji() {
            document.getElementById('bitmoji-coins').innerText = user.coins;
            document.getElementById('bitmoji-crates').innerText = user.crates;
            
            const preview = document.getElementById('bitmoji-preview');
            let avatarHTML = '';
            if (user.equippedItems.length > 0) {
                const equippedIcons = user.equippedItems.map(id => {
                    const item = findItemById(id);
                    return item ? item.icon : 'üì¶';
                }).join(' ');
                avatarHTML = equippedIcons;
            } else {
                avatarHTML = user.gender === 'Male' ? 'üë¶' : 'üëß';
            }
            preview.innerText = avatarHTML;

            const invDiv = document.getElementById('bitmoji-inventory');
            invDiv.innerHTML = '';
            user.inventory.forEach(itemId => {
                const item = findItemById(itemId);
                if (!item) return;
                const div = document.createElement('div');
                div.className = 'inventory-item';
                if (user.equippedItems.includes(itemId)) div.classList.add('equipped');
                div.innerText = item.icon;
                div.title = item.name;
                div.onclick = () => equipItem(itemId);
                invDiv.appendChild(div);
            });
        }

        function equipItem(itemId) {
            if (user.equippedItems.includes(itemId)) {
                user.equippedItems = user.equippedItems.filter(id => id !== itemId);
            } else {
                user.equippedItems.push(itemId);
            }
            saveState();
            renderBitmoji();
        }

        // ===============================
        // STORE
        // ===============================
        function showStore() {
            toggleSidebar();
            document.getElementById('modal-store').classList.remove('hidden');
            renderStore('shirts');
            renderCategoryTabs();
        }

        function renderCategoryTabs() {
            const tabsDiv = document.getElementById('category-tabs');
            tabsDiv.innerHTML = '';
            STORE_CATEGORIES.forEach(cat => {
                const tab = document.createElement('span');
                tab.className = 'category-tab';
                tab.innerText = cat;
                tab.onclick = () => {
                    document.querySelectorAll('.category-tab').forEach(t => t.classList.remove('active'));
                    tab.classList.add('active');
                    renderStore(cat);
                };
                tabsDiv.appendChild(tab);
            });
            if (tabsDiv.firstChild) tabsDiv.firstChild.classList.add('active');
        }

        function renderStore(category) {
            document.getElementById('store-coins').innerText = user.coins;
            document.getElementById('store-crates').innerText = user.crates;

            const grid = document.getElementById('store-items');
            grid.innerHTML = '';

            const items = STORE_ITEMS[category];
            items.forEach(item => {
                const div = document.createElement('div');
                div.className = 'store-card';

                let lockedByLevel = user.level < item.levelRequired;
                let lockedByPremium = item.premium && !user.isPremium;
                let owned = user.inventory.includes(item.id);

                if (owned) {
                    div.innerHTML = `
                        <div class="icon">‚úÖ</div>
                        <div>${item.name}</div>
                        <div class="owned">Owned</div>
                    `;
                } else if (lockedByPremium) {
                    div.innerHTML = `
                        <div class="icon">üîí</div>
                        <div>${item.name}</div>
                        <div class="locked">Premium Required üíé</div>
                    `;
                } else if (lockedByLevel) {
                    div.innerHTML = `
                        <div class="icon">üîê</div>
                        <div>${item.name}</div>
                        <div class="locked">Unlock at Lv ${item.levelRequired}</div>
                    `;
                } else {
                    div.innerHTML = `
                        <div class="icon">${item.premium ? "üíé" : item.icon}</div>
                        <div>${item.name}</div>
                        <div class="price">${item.price} ü™ô</div>
                        <button onclick="buyItem('${item.id}', ${item.price})">Buy</button>
                    `;
                }
                grid.appendChild(div);
            });
        }

        function buyItem(id, price) {
            let item = findItemById(id);
            if (!item) return;

            if (item.premium && !user.isPremium) {
                alert("Upgrade to Premium to unlock this üíé");
                return;
            }

            if (user.level < item.levelRequired) {
                alert("Reach Level " + item.levelRequired + " to unlock this üîì");
                return;
            }

            if (user.coins >= price) {
                user.coins -= price;
                user.inventory.push(id);
                saveState();
                renderStore(item.type);
                alert("Purchased Successfully üî•");
            } else {
                alert("Not enough coins ü™ô");
            }
        }

        function openCrate() {
            if (user.crates <= 0) {
                alert("No crates available üì¶");
                return;
            }

            const allItems = Object.values(STORE_ITEMS).flat();
            const randomItem = allItems[Math.floor(Math.random() * allItems.length)];

            user.inventory.push(randomItem.id);
            user.crates -= 1;

            saveState();
            alert("You got: " + randomItem.name + " üéâ");
            if (!document.getElementById('modal-store').classList.contains('hidden')) {
                renderStore(document.querySelector('.category-tab.active')?.innerText || 'shirts');
            }
        }

        function claimFreeReward() {
            const today = new Date().toDateString();
            if (localStorage.getItem("freeRewardClaimed") === today) {
                alert("Already claimed today üéÅ");
                return;
            }

            user.coins += 30;
            user.xp += 20;

            localStorage.setItem("freeRewardClaimed", today);
            saveState();
            alert("Free reward claimed üéâ");
            if (!document.getElementById('modal-bitmoji').classList.contains('hidden')) {
                renderBitmoji();
            }
        }

        // Start App
        init();
    </script>
</body>
</html>
